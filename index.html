<!doctype html>

<html lang="pt-BR" class="h-full">  
 <head>  
  <meta charset="UTF-8">  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <title>Card√°pio Interativo</title>  
  <script src="https://cdn.tailwindcss.com"></script>  
  <script src="/_sdk/element_sdk.js"></script>  
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&amp;family=Montserrat:wght@300;400;500;600&amp;display=swap" rel="stylesheet">  
  <style>  
    body {  
      box-sizing: border-box;  
    }  
    .font-display { font-family: 'Cormorant Garamond', serif; }  
    .font-body { font-family: 'Montserrat', sans-serif; }  .category-entrada { border-left: 4px solid #c41e3a; }  
.category-massa { border-left: 4px solid #a01729; }  
.category-sobremesa { border-left: 4px solid #d43d5c; }  
  
.dot-entrada { background: #c41e3a; }  
.dot-massa { background: #a01729; }  
.dot-sobremesa { background: #d43d5c; }  
  
.item-card {  
  transition: all 0.3s ease;  
}  
.item-card:hover {  
  transform: translateX(8px);  
}  
.item-card.selected {  
  background: linear-gradient(135deg, #ffb3d9 0%, #ffa0cc 100%);  
}  
  
.addon-chip {  
  transition: all 0.2s ease;  
}  
.addon-chip:hover {  
  transform: scale(1.05);  
}  
.addon-chip.selected {  
  background: #c41e3a;  
  color: #ffffff;  
}  
  
.total-bar {  
  backdrop-filter: blur(10px);  
}  
  
@keyframes slideIn {  
  from { opacity: 0; transform: translateY(20px); }  
  to { opacity: 1; transform: translateY(0); }  
}  
.animate-slide {  
  animation: slideIn 0.4s ease forwards;  
}  
  
.scrollbar-thin::-webkit-scrollbar {  
  width: 6px;  
}  
.scrollbar-thin::-webkit-scrollbar-track {  
  background: #ffc9e0;  
}  
.scrollbar-thin::-webkit-scrollbar-thumb {  
  background: #ff91bf;  
  border-radius: 3px;  
}

  </style>  
  <style>@view-transition { navigation: auto; }</style>  
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>  
 </head>  
 <body class="h-full font-body bg-[#ffc9e0] text-[#8b1538]">  
  <div id="app" class="h-full flex flex-col overflow-hidden"><!-- Header -->  
   <header class="flex-shrink-0 px-6 py-8 text-center border-b border-[#ff91bf]">  
    <div class="w-12 h-[1px] bg-[#c41e3a] mx-auto mb-4"></div>  
    <h1 id="restaurant-name" class="font-display text-4xl md:text-5xl font-semibold tracking-wide text-[#c41e3a]">Doce Afeto</h1>  
    <p id="tagline" class="font-body text-sm tracking-[0.3em] uppercase mt-3 text-[#8b1538]">Sabor, Mem√≥ria e Do√ßura</p>  
    <div class="w-12 h-[1px] bg-[#c41e3a] mx-auto mt-4"></div>  
   </header><!-- Main Content -->  
   <main class="flex-1 overflow-y-auto scrollbar-thin px-4 md:px-8 py-6"><!-- Legend -->  
    <div class="flex justify-center gap-6 mb-8 text-xs tracking-wider uppercase">  
     <div class="flex items-center gap-2"><span class="w-3 h-3 rounded-full dot-entrada"></span> <span>Bolos</span>  
     </div>  
     <div class="flex items-center gap-2"><span class="w-3 h-3 rounded-full dot-massa"></span> <span>Rocamboles</span>  
     </div>  
     <div class="flex items-center gap-2"><span class="w-3 h-3 rounded-full dot-sobremesa"></span> <span>Brigadeiros &amp; Doces</span>  
     </div>  
    </div><!-- Categories -->  
    <div class="max-w-4xl mx-auto space-y-10"><!-- Bolos & Tortas -->  
     <section class="animate-slide" style="animation-delay: 0.1s;">  
      <div class="flex items-center gap-4 mb-6"><span class="w-4 h-4 rounded-full dot-entrada"></span>  
       <h2 class="font-display text-2xl md:text-3xl font-medium">Bolos</h2>  
       <div class="flex-1 h-[1px] bg-[#ff91bf]"></div><span class="text-[#c41e3a] text-sm">R$ 45 - 49,90</span>  
      </div>  
      <div class="space-y-3" id="entradas-container"><!-- Items rendered by JS -->  
      </div>  
     </section><!-- Brownies & Rocamboles -->  
     <section class="animate-slide" style="animation-delay: 0.2s;">  
      <div class="flex items-center gap-4 mb-6"><span class="w-4 h-4 rounded-full dot-massa"></span>  
       <h2 class="font-display text-2xl md:text-3xl font-medium">Rocamboles</h2>  
       <div class="flex-1 h-[1px] bg-[#ff91bf]"></div><span class="text-[#a01729] text-sm">R$ 79,90</span>  
      </div>  
      <div class="space-y-3" id="massas-container"><!-- Items rendered by JS -->  
      </div>  
     </section><!-- Brigadeiros & Doces -->  
     <section class="animate-slide" style="animation-delay: 0.3s;">  
      <div class="flex items-center gap-4 mb-6"><span class="w-4 h-4 rounded-full dot-sobremesa"></span>  
       <h2 class="font-display text-2xl md:text-3xl font-medium">Brigadeiros &amp; Doces</h2>  
       <div class="flex-1 h-[1px] bg-[#ff91bf]"></div><span class="text-[#d43d5c] text-sm">R$ 50</span>  
      </div>  
      <div class="space-y-3" id="sobremesas-container"><!-- Items rendered by JS -->  
      </div>  
     </section><!-- Prefer√™ncias -->  
     <section class="animate-slide p-6 bg-[#ffe0f0] rounded-xl border border-[#ff91bf]" style="animation-delay: 0.4s;">  
      <h3 class="font-display text-xl mb-4 text-[#c41e3a]">Prefer√™ncias do Pedido</h3>  
      <div><!-- Tamanho -->  
       <div>  
        <p class="text-xs uppercase tracking-wider text-[#888] mb-3">Tamanho</p>  
        <div class="flex gap-2 flex-wrap" id="tempero-container"><!-- Rendered by JS -->  
        </div>  
       </div>  
      </div><!-- Observa√ß√µes -->  
      <div class="mt-6"><label class="text-xs uppercase tracking-wider text-[#888] mb-2 block" for="observacoes">Observa√ß√µes</label> <textarea id="observacoes" class="w-full bg-[#ffc9e0] border border-[#ff91bf] rounded-lg p-3 text-sm text-[#8b1538] focus:border-[#c41e3a] focus:outline-none transition-colors resize-none" rows="2" placeholder="Mensagem personalizada no bolo? Entrega especial?"></textarea>  
      </div>  
     </section>  
    </div>  
   </main><!-- Order Summary Bar -->  
   <footer class="flex-shrink-0 total-bar bg-[#ffe0f0]/95 border-t border-[#ff91bf] px-6 py-4">  
    <div class="max-w-4xl mx-auto">  
     <div class="flex items-center justify-between">  
      <div>  
       <p class="text-xs uppercase tracking-wider text-[#888]">Seu Pedido</p>  
       <p id="items-count" class="text-sm text-[#8b1538] mt-1">Nenhum item selecionado</p>  
      </div>  
      <div class="text-right">  
       <p class="text-xs uppercase tracking-wider text-[#888]">Total</p>  
       <p id="total-price" class="font-display text-3xl text-[#c41e3a] font-semibold">R$ 0</p>  
      </div>  
     </div><!-- Selected Items Preview -->  
     <div id="selected-items" class="mt-3 pt-3 border-t border-[#ff91bf] hidden">  
      <div class="flex flex-wrap gap-2" id="selected-items-list"><!-- Rendered by JS -->  
      </div>  
     </div><!-- WhatsApp Button --> <button id="whatsapp-btn" onclick="sendToWhatsApp()" class="w-full mt-4 bg-[#c41e3a] hover:bg-[#a01729] text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed" disabled>  
      <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z" />  
      </svg><span>Enviar Pedido pelo WhatsApp</span> </button>  
     <p id="footer-text" class="text-center text-xs text-[#666] mt-4">Todos os doces s√£o feitos artesanalmente com ingredientes de primeira qualidade</p>  
    </div>  
   </footer>  
  </div>  
  <script>  
    // Menu Data  
    const menuData = {  
      entradas: [  
        { id: 'e1', name: 'Bolo de Chocolate', desc: 'Massa de chocolate irresist√≠vel', price: 49.90 },  
        { id: 'e2', name: 'Bolo de Cenoura com Cobertura de Chocolate', desc: 'Massa fofinha de cenoura com cobertura de chocolate', price: 49.90 },  
        { id: 'e3', name: 'Bolo de Trigo com Ninho e Geleia de Morango', desc: 'Massa de trigo com cobertura de ninho e geleia de morango', price: 45 },  
        { id: 'e4', name: 'Bolo de Churros', desc: 'Sabor de churros em formato de bolo', price: 49.90 }  
      ],  
      massas: [  
        { id: 'm1', name: 'Rocambole de Chocolate com Cobertura de Lim√£o', desc: 'Massa de chocolate enrolada com cobertura de lim√£o', price: 79.90 },  
        { id: 'm2', name: 'Rocambole de Ninho com Geleia de Morango', desc: 'Recheio de ninho e geleia de morango', price: 79.90 },  
        { id: 'm3', name: 'Rocambole de Red Velvet', desc: 'Massa red velvet aveludada enrolada', price: 79.90 }  
      ],  
      sobremesas: [  
        { id: 's1', name: 'Brigadeiros para Encomendas', desc: 'Pacote de brigadeiros gourmet personalizados', price: 50 },  
        { id: 's2', name: 'Doces Personalizados', desc: 'Doces feitos sob medida para sua festa', price: 50 }  
      ],  
      temperos: ['Pequeno', 'M√©dio', 'Grande', 'Festa']  
    };  // State  
let selectedItems = new Map();  
let selectedTempero = 'Pequeno';  

// Default Config  
const defaultConfig = {  
  restaurant_name: 'Doce Afeto',  
  tagline: 'Sabor, Mem√≥ria e Do√ßura',  
  footer_text: 'Todos os doces s√£o feitos artesanalmente com ingredientes de primeira qualidade',  
  primary_color: '#c41e3a',  
  background_color: '#ffc9e0',  
  surface_color: '#ffe0f0',  
  text_color: '#8b1538',  
  muted_color: '#ff91bf',  
  font_family: 'Cormorant Garamond',  
  font_size: 16  
};  

// Initialize SDK  
window.elementSdk.init({  
  defaultConfig,  
  onConfigChange: async (config) => {  
    const c = { ...defaultConfig, ...config };  
      
    document.getElementById('restaurant-name').textContent = c.restaurant_name;  
    document.getElementById('tagline').textContent = c.tagline;  
    document.getElementById('footer-text').textContent = c.footer_text;  
      
    document.getElementById('restaurant-name').style.color = c.primary_color;  
    document.getElementById('total-price').style.color = c.primary_color;  
      
    document.body.style.backgroundColor = c.background_color;  
    document.body.style.color = c.text_color;  
      
    const fontStack = ${c.font_family}, serif;  
    document.querySelectorAll('.font-display').forEach(el => {  
      el.style.fontFamily = fontStack;  
    });  
      
    document.querySelectorAll('.font-body').forEach(el => {  
      el.style.fontSize = ${c.font_size}px;  
    });  
  },  
  mapToCapabilities: (config) => {  
    const c = { ...defaultConfig, ...config };  
    return {  
      recolorables: [  
        {  
          get: () => c.background_color,  
          set: (v) => window.elementSdk.setConfig({ background_color: v })  
        },  
        {  
          get: () => c.surface_color,  
          set: (v) => window.elementSdk.setConfig({ surface_color: v })  
        },  
        {  
          get: () => c.text_color,  
          set: (v) => window.elementSdk.setConfig({ text_color: v })  
        },  
        {  
          get: () => c.primary_color,  
          set: (v) => window.elementSdk.setConfig({ primary_color: v })  
        },  
        {  
          get: () => c.muted_color,  
          set: (v) => window.elementSdk.setConfig({ muted_color: v })  
        }  
      ],  
      borderables: [],  
      fontEditable: {  
        get: () => c.font_family,  
        set: (v) => window.elementSdk.setConfig({ font_family: v })  
      },  
      fontSizeable: {  
        get: () => c.font_size,  
        set: (v) => window.elementSdk.setConfig({ font_size: v })  
      }  
    };  
  },  
  mapToEditPanelValues: (config) => {  
    const c = { ...defaultConfig, ...config };  
    return new Map([  
      ['restaurant_name', c.restaurant_name],  
      ['tagline', c.tagline],  
      ['footer_text', c.footer_text]  
    ]);  
  }  
});  

// Render Functions  
function renderMenuItem(item, category) {  
  const isSelected = selectedItems.has(item.id);  
  const categoryClass = category-${category};  
    
  return `  
    <div   
      class="item-card ${categoryClass} pl-4 py-4 pr-5 bg-[#ffe0f0] rounded-r-lg cursor-pointer ${isSelected ? 'selected' : ''}"  
      data-id="${item.id}"  
      data-category="${category}"  
      data-price="${item.price}"  
      data-name="${item.name}"  
      onclick="toggleItem('${item.id}', '${category}', ${item.price}, '${item.name}')"  
    >  
      <div class="flex justify-between items-start">  
        <div class="flex-1">  
          <div class="flex items-center gap-3">  
            <h3 class="font-display text-lg font-medium">${item.name}</h3>  
            ${isSelected ? '<span class="text-[#c41e3a] text-xs">‚úì Selecionado</span>' : ''}  
          </div>  
          <p class="text-sm text-[#777] mt-1">${item.desc}</p>  
        </div>  
        <span class="font-display text-xl text-[#c41e3a] ml-4">R$ ${item.price}</span>  
      </div>  
    </div>  
  `;  
}  

function renderChip(item, type, isSelected) {  
  return `  
    <button   
      class="addon-chip px-4 py-2 rounded-full text-sm border border-[#ff91bf] ${isSelected ? 'selected' : 'bg-[#ffc9e0] hover:border-[#c41e3a]'}"  
      onclick="toggle${type}('${item.id || item}')"  
    >  
      ${item.name || item}${item.price ? ` +R$ ${item.price}` : ''}  
    </button>  
  `;  
}  

function renderMenu() {  
  document.getElementById('entradas-container').innerHTML =   
    menuData.entradas.map(item => renderMenuItem(item, 'entrada')).join('');  
    
  document.getElementById('massas-container').innerHTML =   
    menuData.massas.map(item => renderMenuItem(item, 'massa')).join('');  
    
  document.getElementById('sobremesas-container').innerHTML =   
    menuData.sobremesas.map(item => renderMenuItem(item, 'sobremesa')).join('');  
    
  document.getElementById('tempero-container').innerHTML =   
    menuData.temperos.map(t => renderChip(t, 'Tempero', selectedTempero === t)).join('');  
    
  document.getElementById('restricoes-container').innerHTML =   
    menuData.restricoes.map(r => renderChip(r, 'Restricao', selectedRestricoes.has(r))).join('');  
}  

function updateTotal() {  
  let total = 0;  
  let itemNames = [];  
    
  selectedItems.forEach((item, id) => {  
    total += item.price;  
    itemNames.push(item.name);  
  });  
    
  document.getElementById('total-price').textContent = R$ ${total.toFixed(2)};  
    
  const count = selectedItems.size;  
  let countText = count === 0 ? 'Nenhum item selecionado' :   
                  count === 1 ? '1 item' : ${count} itens;  
    
  document.getElementById('items-count').textContent = countText;  
    
  const selectedContainer = document.getElementById('selected-items');  
  const selectedList = document.getElementById('selected-items-list');  
  const whatsappBtn = document.getElementById('whatsapp-btn');  
    
  if (selectedItems.size > 0) {  
    selectedContainer.classList.remove('hidden');  
    selectedList.innerHTML = itemNames.map(name =>   
      <span class="px-3 py-1 bg-[#ff91bf] rounded-full text-xs text-[#8b1538]">${name}</span>  
    ).join('');  
    whatsappBtn.disabled = false;  
  } else {  
    selectedContainer.classList.add('hidden');  
    whatsappBtn.disabled = true;  
  }  
}  

// Toggle Functions  
function toggleItem(id, category, price, name) {  
  if (selectedItems.has(id)) {  
    selectedItems.delete(id);  
  } else {  
    selectedItems.set(id, { category, price, name });  
  }  
  renderMenu();  
  updateTotal();  
}  

function toggleTempero(tempero) {  
  selectedTempero = tempero;  
  renderMenu();  
}  

function toggleRestricao(restricao) {  
  if (selectedRestricoes.has(restricao)) {  
    selectedRestricoes.delete(restricao);  
  } else {  
    selectedRestricoes.add(restricao);  
  }  
  renderMenu();  
}  

// WhatsApp Function  
function sendToWhatsApp() {  
  if (selectedItems.size === 0) return;  
    
  let message = 'üßÅ Pedido Doce Afeto üßÅ\n\n';  
  message += 'Itens Selecionados:\n';  
    
  let total = 0;  
  selectedItems.forEach((item, id) => {  
    message += ‚Ä¢ ${item.name} - R$ ${item.price.toFixed(2)}\n;  
    total += item.price;  
  });  
    
  message += \n*Tamanho:* ${selectedTempero}\n;  
    
  const observacoes = document.getElementById('observacoes').value.trim();  
  if (observacoes) {  
    message += \n*Observa√ß√µes:*\n${observacoes}\n;  
  }  
    
  message += \n*Total: R$ ${total.toFixed(2)}*;  
    
  const encodedMessage = encodeURIComponent(message);  
  const whatsappURL = https://wa.me/554491123943?text=${encodedMessage};  
    
  window.open(whatsappURL, '_blank', 'noopener,noreferrer');  
}  

// Initialize  
renderMenu();  
updateTotal();

  </script>  
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c4c2dcd17ec9a7f',t:'MTc2OTU1ODEwNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>  
</html>
